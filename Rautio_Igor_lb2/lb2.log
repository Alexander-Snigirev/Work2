[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ lscpu
Architecture:             x86_64
  CPU op-mode(s):         32-bit, 64-bit
  Address sizes:          36 bits physical, 48 bits virtual
  Byte Order:             Little Endian
CPU(s):                   4
  On-line CPU(s) out_file:    0-3
Vendor ID:                GenuineIntel
  Model name:             Intel(R) Pentium(R) CPU  N3540  @ 2.16GHz
    CPU family:           6
    Model:                55
    Thread(s) per core:   1
    Core(s) per socket:   4
    Socket(s):            1
    Stepping:             8
    CPU max MHz:          2665.6001
    CPU min MHz:          499.8000
    BogoMIPS:             4333.33
    Flags:                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts 
                          acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon p
                          ebs bts rep_good nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf tsc_known_
                          freq pni pclmulqdq dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 
                          movbe popcnt tsc_deadline_timer rdrand lahf_lm 3dnowprefetch epb pti ibrs ibpb stibp
                           tsc_adjust smep erms dtherm ida arat md_clear
Caches (sum of all):      
  L1d:                    96 KiB (4 instances)
  L1i:                    128 KiB (4 instances)
  L2:                     2 MiB (2 instances)
NUMA:                     
  NUMA node(s):           1
  NUMA node0 CPU(s):      0-3
Vulnerabilities:          
  Gather data sampling:   Not affected
  Itlb multihit:          Not affected
  L1tf:                   Not affected
  Mds:                    Mitigation; Clear CPU buffers; SMT disabled
  Meltdown:               Mitigation; PTI
  Mmio stale data:        Unknown: No mitigations
  Reg file data sampling: Not affected
  Retbleed:               Not affected
  Spec rstack overflow:   Not affected
  Spec store bypass:      Not affected
  Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization
  Spectre v2:             Mitigation; Retpolines; IBPB conditional; IBRS_FW; STIBP disabled; RSB filling; PBRS
                          B-eIBRS Not affected; BHI Not affected
  Srbds:                  Not affected
  Tsx async abort:        Not affected
Задание 1_1:
1.1. Запустите в фоновом режиме несколько утилит.  
  Воспользуйтесь командой jobs для анализа списка заданий и очередности их выполнения.  
  Верните невыполненные задания в приоритетный режим командой fg. Например: fg %3  Отмените одно из невыполненных заданий.
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_1.c -o exe1
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_2.c -o exe2
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_3.c -o exe3
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe1 >> out_file.txt &
[1] 14132
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe2 >> out_file.txt &
[2] 14674
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe3 >> out_file.txt &
[3] 15023
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs
[1]   Запущен          ./exe1 >> out_file.txt &
[2]-  Запущен          ./exe2 >> out_file.txt &
[3]+  Запущен          ./exe3 >> out_file.txt &
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ 
### В фоне запущены 3 процесса
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ fg
./exe3 >> out_file.txt
^Z
### Процесс exe3 возвращается в терминал и начинает работать в нем
[3]+  Остановлен    ./exe3 >> out_file.txt
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ %3 &
[3]+ ./exe3 >> out_file.txt &
### Возвращение в фон
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ fg %2
./exe2 >> out_file.txt
^Z
[2]+  Остановлен    ./exe2 >> out_file.txt
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs
[1]   Запущен          ./exe1 >> out_file.txt &
[2]+  Остановлен    ./exe2 >> out_file.txt
[3]-  Запущен          ./exe3 >> out_file.txt &
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ %2 &
[2]+ ./exe2 >> out_file.txt &
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ kill 4173
[3]+  Завершено      ./exe3 >> out_file.txt
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs -l
[1]-  4165 Запущен          ./exe1 >> out_file.txt &
[2]+  4170 Запущен          ./exe2 >> out_file.txt &
### Использование kill
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe1 > out_file.txt &
[1] 6151
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe2 > out_file.txt &
[2] 6160
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exe3 > out_file2.txt &
[3] 6189
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs
[1]   Запущен          ./exe1 > out_file.txt &
[2]-  Запущен          ./exe2 > out_file.txt &
[3]+  Запущен          ./exe3 > out_file2.txt &
Задание 1_2: Ознакомьтесь с командой nohup(1).  Запустите длительный процесс по nohup(1). 
Завершите сеанс работы. Снова войдите в систему и проверьте таблицу процессов. Поясните результат.
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ nohup sleep 120 &
[4] 6233
nohup: ввод игнорируется, вывод добавляется в 'nohup.out'
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs
[1]   Запущен          ./exe1 > out_file.txt &
[2]   Запущен          ./exe2 > out_file.txt &
[3]-  Запущен          ./exe3 > out_file2.txt &
[4]+  Запущен          nohup sleep 120 &
### Выходим из терминала
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps aux | grep sleep
valeria+    6233  0.0  0.0   6084  2432 ?        S    19:05   0:00 sleep 120
valeria+    6444  0.0  0.0   6652  2304 pts/2    S+   19:06   0:00 grep --color=auto sleep
### Как видно, процесс 6233 пережил закрытие терминала
### nohup блокирует сигнал SIGHUP, завершающий обычные процессы сессии
Задание 1_3:
1.3. Определите uid процесса, каково минимальное значение, и кому оно принадлежит. Каково минимальное и максимальное значение pid
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eo pid,user,uid,cmd | grep " 0 " | head -10
      1 root         0 /sbin/init splash
      2 root         0 [kthreadd]
      3 root         0 [pool_workqueue_release]
      4 root         0 [kworker/R-rcu_g]
      5 root         0 [kworker/R-rcu_p]
      6 root         0 [kworker/R-slub_]
      7 root         0 [kworker/R-netns]
      9 root         0 [kworker/0:0H-events_highpri]
     12 root         0 [kworker/R-mm_pe]
     13 root         0 [rcu_exersizes_kthread]
### uid = 0 принадлежит root. Все его процессы будут иметь uid = 0
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eo pid,user,uid,cmd | grep " 1000 " | head -3
   2248 valeria+  1000 /usr/lib/systemd/systemd --user
   2254 valeria+  1000 (sd-pam)
   2265 valeria+  1000 /usr/bin/pipewire
### uid>=1000 имеют процессы, запущенные от имени обычных пользователей
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eo pid,user,uid,cmd --no-headers | awk '$3 > 0 && $3 < 1000' | head -3
   1104 systemd+   108 /usr/lib/systemd/systemd-oomd
   1106 systemd+   101 /usr/lib/systemd/systemd-resolved
   1108 systemd+   103 /usr/lib/systemd/systemd-timesyncd
### Процессы с uid принадлежащим (0,1000) запущены от имени системных служб   
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ date
Вс 30 мар 2025 10:10:47 MSK
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -p 0 -o pid,ppid,user,cmd
ошибка: process ID out of range
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -p 1 -o pid,ppid,user,cmd
    PID    PPID USER     CMD
      1       0 root     /sbin/init splash
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -e --sort=pid | head -3
    PID TTY          TIME CMD
      1 ?        00:00:04 systemd
      2 ?        00:00:00 kthreadd      
### процесса с pid = 0 не существует, минимальный pid=1 - принадлежит первому процессу в системе      
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -e --sort=-pid | head -3
    PID TTY          TIME CMD
  13187 pts/2    00:00:00 head
  13186 pts/2    00:00:00 ps
### Существующие процессы с самым большим pid
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cat /proc/sys/kernel/pid_max
4194304
### Максимально возможный pid в системе
Задание 1_4:
1.4. Проанализируйте множество системных процессов, как их отличить от прочих
### Системные процессы имеют uid<1000
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eo pid,user,uid,ppid,cmd --no-headers | awk '$3 > 0 && $3 < 1000'
   1104 systemd+   108       1 /usr/lib/systemd/systemd-oomd
   1106 systemd+   101       1 /usr/lib/systemd/systemd-resolved
   1108 systemd+   103       1 /usr/lib/systemd/systemd-timesyncd
   1261 avahi      114       1 avahi-daemon: running [valeria-AORUS-15P-XD.local]
   1264 message+   102       1 @dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation --syslog-only
   1267 gnome-r+   996       1 /usr/libexec/gnome-remote-desktop-daemon --system
   1271 polkitd    999       1 /usr/lib/polkit-1/polkitd --no-debug
   1300 avahi      114    1261 avahi-daemon: chroot helper
   1383 syslog     104       1 /usr/sbin/rsyslogd -n -iNONE
   1623 lp           7    1600 /usr/lib/cups/notifier/dbus dbus://
   1681 cups-br+   130       1 /usr/sbin/cups-browsed
   1683 kernoops   113       1 /usr/sbin/kerneloops --test
   1686 kernoops   113       1 /usr/sbin/kerneloops
   1767 rtkit      116       1 /usr/libexec/rtkit-daemon
   1898 colord     123       1 /usr/libexec/colord
### Предположение про uid подтвердилось
### Назначение:
systemd+ - системные службы, работающие в systemd
avahi - служба обнаружение устройств в сети
message+ - коммуникация между приложениями и системными сервисами
lp - работа с очередями печати
syslog - собирает логи системы и служб
kernoops - мониторит /proc на наличие сообщений об ошибках ядра
rtkit - управление правами доступа некоторых пользовательских приложений

Задание 1_5:
Дайте характеристику процессу (например, прародителю всех пользовательских процессов вашей сессии), используя информацию из псевдоФС /proc
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_1.c -o exe1
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_1.c -o exe2
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_11_1.c -o exe3
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc parent_proc.c -o par_proc
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./par_proc &
[1] 17543
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ jobs
[1]+  Запущен          ./par_proc &
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -o pid,ppid,cmd | grep proc
  17543    6314 ./par_proc
  17545   17543 ./exe1
  17546   17543 ./exe2
  17547   17543 ./exe3
  17699    6314 grep --color=auto proc
### Запущены 3 процесса с одним прародителем
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ date
Вс 30 мар 2025 14:40:44 MSK
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./par_proc &
[1] 4529
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cd /proc/4529
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ ls
arch_status  cmdline             environ  ksm_merging_pages  maps        ns             patch_state  sessionid     statm           timerslack_ns
attr         comm                exe      ksm_stat           mem         numa_maps      personality  setgroups     status          uid_map
autogroup    coredump_filter     fd       latency            mountinfo   oom_adj        projid_map   smaps         syscall         wchan
auxv         cpu_resctrl_groups  fdinfo   limits             mounts      oom_score      root         smaps_rollup  exersize
cgroup       cpuset              gid_map  loginuid           mountstats  oom_score_adj  sched        stack         timens_offsets
clear_refs   cwd                 io       map_files          net         pagemap        schedstat    stat          timers
valeria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ cat status
Name:   par_proc
Umask:  0002
State:  S (sleeping)
Tgid:   4529
Ngid:   0
Pid:    4529
PPid:   3811
TracerPid:      0
Uid:    1000    1000    1000    1000
Gid:    1000    1000    1000    1000
FDSize: 256
Groups: 1000 
NStgid: 4529
NSpid:  4529
NSpgid: 4529
NSsid:  3811
Kthread:        0
VmPeak:     2636 kB
VmSize:     2552 kB
VmLck:         0 kB
VmPin:         0 kB
VmHWM:      1280 kB
VmRSS:      1280 kB
RssAnon:               0 kB
RssFile:            1280 kB
RssShmem:              0 kB
VmData:       92 kB
VmStk:       136 kB
VmExe:         4 kB
VmLib:      1748 kB
VmPTE:        40 kB
VmSwap:        0 kB
HugetlbPages:          0 kB
CoreDumping:    0
THP_enabled:    1
untag_mask:     0xffffffffffffffff
Threads:        1
SigQ:   0/62653
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000000000000
SigIgn: 0000000000000000
SigCgt: 0000000000000000
CapInh: 0000000000000000
CapPrm: 0000000000000000
CapEff: 0000000000000000
CapBnd: 000001ffffffffff
CapAmb: 0000000000000000
NoNewPrivs:     0
Seccomp:        0
Seccomp_filters:        0
Speculation_Store_Bypass:       thread vulnerable
SpeculationIndirectBranch:      conditional enabled
Cpus_allowed:   ffff
Cpus_allowed_out_file:      0-15
Mems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001
Mems_allowed_out_file:      0
voluntary_ctxt_switches:        1
nonvoluntary_ctxt_switches:     0
x86_Thread_features:
x86_Thread_features_locked:
### Общая информация о процессе
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ readlink exe
/home/valeria/Рабочий стол/os_lb2/par_proc
### Символьная ссылка на исполняемый файл процесса
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ ls -l fd
итого 0
lrwx------ 1 valeria valeria 64 мар 30 14:49 0 -> /dev/pts/0
lrwx------ 1 valeria valeria 64 мар 30 14:49 1 -> /dev/pts/0
lr-x------ 1 valeria valeria 64 мар 30 14:49 103 -> /snap/code/187/usr/share/code/v8_context_snapshot.bin
lrwx------ 1 valeria valeria 64 мар 30 14:49 2 -> /dev/pts/0
l-wx------ 1 valeria valeria 64 мар 30 14:49 37 -> /home/valeria/.config/Code/logs/20250330T144308/ptyhost.log
vscode_=./par_procvaleria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ cat stat
4529 (par_proc) S 3811 4529 3811 34816 5241 4194304 155 0 0 0 0 0 0 0 20 0 1 0 20310 2613248 320 18446744073709551615 109484420255744 109484420256493 140732094751552 0 0 0 0 0 0 1 0 0 17 14 0 0 0 0 0 109484420267408 109484420268048 109484444573696 140732094753658 140732094753669 140732094753669 140732094758893 0
### СТатистика процесса
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:/proc/4529$ cat io
rchar: 4092
wchar: 0
syscr: 9
syscw: 0
read_bytes: 0
write_bytes: 0
cancelled_write_bytes: 0
### Информация о вводе/выводе
[Вc 11 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exersize_16.sh 4529 kk
Имя: 
Name:   par_proc
UID: 
Uid:    1000    1000    1000    1000
PPID: 
PPid:   3811
Память: 
VmPeak:     2636 kB
VmSize:     2552 kB
VmLck:         0 kB
VmPin:         0 kB
VmHWM:      1280 kB
VmRSS:      1280 kB
VmData:       92 kB
VmStk:       136 kB
VmExe:         4 kB
VmLib:      1748 kB
VmPTE:        40 kB
VmSwap:        0 kB
Исполняемый файл: 
/home/valeria/Рабочий стол/os_lb2/par_proc
### Запуск скрипта, выводящего общую информацию о процессе

Задание 2_1:
2.1. Создайте программу на основе одного файла (исходного, а затем исполняемого) с псевдораспараллеливанием вычислений
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_2_1.c -o parallel_procs
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize_2_2.c -o parallel_cycles
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./parallel_procs
Родительский процесс:
PID: 18430
PPID: 3811
Шаг родительского процесса - 1
Дочерний процесс:
PID: 18431
PPID: 18430
Шаг дочернего процесса - 1
Шаг родительского процесса - 2
Шаг дочернего процесса - 2
Шаг родительского процесса - 3
Шаг дочернего процесса - 3
Шаг родительского процесса - 4
Шаг дочернего процесса - 4
Шаг родительского процесса - 5
Шаг дочернего процесса - 5
Дочерний процесс завершен
Родительский процесс завершен
### Как видно, итерации происходят по очереди
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./parallel_procs
Родительский процесс:
PID: 19215
PPID: 3811
Шаг родительского процесса - 1
процесс-1 0
Дочерний процесс:
PID: 19216
PPID: 19215
Шаг дочернего процесса - 1
процесс-2 0
процесс-1 1
процесс-2 1
процесс-1 2
процесс-2 2
процесс-1 3
процесс-2 3
процесс-1 4
процесс-2 4
процесс-1 5
процесс-2 5
процесс-1 6
процесс-2 6
процесс-2 7
процесс-2 8
Шаг родительского процесса - 2
процесс-1 0
процесс-2 9
процесс-1 1
процесс-1 2
процесс-1 3
Шаг дочернего процесса - 2
процесс-2 0
процесс-1 4
процесс-2 1
процесс-1 5
процесс-2 2
процесс-1 6
процесс-2 3
процесс-2 4
процесс-2 5
Шаг родительского процесса - 3
процесс-1 0
процесс-2 6
процесс-1 1
процесс-2 7
процесс-1 2
процесс-2 8
процесс-1 3
процесс-2 9
процесс-1 4
процесс-1 5
процесс-1 6
Шаг дочернего процесса - 3
процесс-2 0
процесс-2 1
процесс-2 2
Шаг родительского процесса - 4
процесс-1 0
процесс-2 3
процесс-1 1
процесс-2 4
процесс-1 2
процесс-2 5
процесс-1 3
процесс-2 6
процесс-1 4
процесс-2 7
процесс-1 5
процесс-2 8
процесс-1 6
процесс-2 9
Шаг родительского процесса - 5
процесс-1 0
Шаг дочернего процесса - 4
процесс-2 0
процесс-1 1
процесс-2 1
процесс-1 2
процесс-2 2
процесс-1 3
процесс-2 3
процесс-1 4
процесс-2 4
процесс-1 5
процесс-2 5
процесс-1 6
процесс-2 6
процесс-2 7
процесс-2 8
процесс-2 9
Шаг дочернего процесса - 5
процесс-2 0
процесс-2 1
процесс-2 2
процесс-2 3
процесс-2 4
процесс-2 5
процесс-2 6
процесс-2 7
процесс-2 8
процесс-2 9
Дочерний процесс завершен
Родительский процесс завершен
### Наблюдается конкуренция процессов за ресурсы
Задание 2_2:
2.2. Создайте программы родителя и потомка с размещением в разных файлах
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize22_son.c -o exersize22_son
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize22_father.c -o exersize22_father
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exersize22_father
Родительский процесс: PID = 25037, PPID = 3811
Дочерний процесс: PID = 25040, PPID = 25037
Потомок начал работу: PID = 25040, PPID = 25037
Потомок завершил работу.
Родительский процесс завершен
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cat ps_before.txt
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   25037    3811  0  80   0 -   638 do_wai pts/0    00:00:00 exersize22_father
0 S  1000   25038   25037  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   25039   25038  0  80   0 -  2831 -      pts/0    00:00:00 ps
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cat ps_after.txt
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   25037    3811  0  80   0 -   671 do_wai pts/0    00:00:00 exersize22_father
0 S  1000   25040   25037  0  80   0 -   671 hrtime pts/0    00:00:00 exersize22_son
0 S  1000   25041   25037  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   25042   25041 99  80   0 -  2831 -      pts/0    00:00:00 ps
### Запуск в обычном режиме. В таблице процессов сначала появился родитель, а после и сам Потомок
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ./exersize22_father &
[1] 25935
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ Родительский процесс: PID = 25935, PPID = 3811
Дочерний процесс: PID = 25939, PPID = 25935
Потомок начал работу: PID = 25939, PPID = 25935
Потомок завершил работу.
Родительский процесс завершен
Задание 2_3:
2.3. Выполните создание процессов с использованием различных функций семейства exec()
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ touch exersize23/exersize23_son.c
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ touch exersize23/exersize23_father.c
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize23/exersize23_father.c -o exersize23/father
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize23/exersize23_son.c -o exersize23/son
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cd exersize23
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize23$ ./father
Родительский процесс: PID = 28932
Потомок: PID = 28932, PPID = 3811
Параметры: ./son param1 param2 
Значение MY_VAR: Hello from Father
### Использование execvp для создания потомка
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize23$ ./father
Родительский процесс: PID = 34878
Потомок: PID = 34878, PPID = 3811
Параметры: son param1 param2 
Значение MY_VAR: Hello from execle
### Использование execle для создания потомка
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize23$ ./father
Родительский процесс: PID = 35039
Потомок: PID = 35039, PPID = 3811
Параметры: son param1 param2 
Значение MY_VAR: Hello from execl
### Использование execl для создания потомка

Задание 2_4:
2.4. Изменяя длительности выполнения родственных процессов и параметры системных вызовов, 
рассмотрите 3 ситуации с нормальным завершением процесса, 
со сменой родителя и фиксацией состояния zombie (м.б. иные названия состояния в системе):
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ gcc exersize24_father.c -o father
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ ./father a
[До создания потомка] Состояние процессов:
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38290    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
0 S  1000   38291   38290  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38292   38291  0  80   0 -  2831 -      pts/0    00:00:00 ps
Родитель: PID = 38290, ожидает завершения потомка
Потомок: PID = 38293, PPID = 38290

[После завершения потомка (ситуация а)] Состояние процессов:
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38290    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
0 S  1000   38306   38290  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38307   38306  0  80   0 -  2831 -      pts/0    00:00:00 ps
### Родительский процесс и процесс-потомок корректно завершаются.
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ ./father b

[До создания потомка] Состояние процессов:
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38339    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
0 S  1000   38340   38339  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38341   38340  0  80   0 -  2831 -      pts/0    00:00:00 ps
Родитель: PID = 38339 завершает работу без ожидания потомка.

[До завершения родителя (ситуация б)] Состояние процессов:
Потомок: PID = 38342, PPID = 38339
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38339    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
1 S  1000   38342   38339  0  80   0 -   671 hrtime pts/0    00:00:00 father
0 S  1000   38343   38339  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38344   38343 99  80   0 -  2831 -      pts/0    00:00:00 ps
### Потомок осиротел
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ ps -eo pid,ppid,cmd | grep 40346
  40594    3811 grep --color=auto 40346
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ cat /proc/3811/status | grep Name
Name:   bash
### bash взял его под контроль и завершил
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize24$ ./father c

[До создания потомка] Состояние процессов:
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38386    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
0 S  1000   38387   38386  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38388   38387 99  80   0 -  2831 -      pts/0    00:00:00 ps
Родитель: PID = 38386 завершает работу, не дождавшись потомка.

[До завершения родителя (ситуация в)] Состояние процессов:
Потомок: PID = 38389, PPID = 38386
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38386    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
1 S  1000   38389   38386  0  80   0 -   671 hrtime pts/0    00:00:00 father
0 S  1000   38390   38386  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38391   38390 99  80   0 -  2831 -      pts/0    00:00:00 ps

[После завершения родителя (ситуация в)] Состояние процессов:
F S   UID     PID    PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000    3811    3781  0  80   0 -  2441 do_wai pts/0    00:00:00 bash
0 S  1000   38386    3811  0  80   0 -   671 do_wai pts/0    00:00:00 father
1 Z  1000   38389   38386  0  80   0 -     0 -      pts/0    00:00:00 father
0 S  1000   38433   38386  0  80   0 -   701 do_wai pts/0    00:00:00 sh
4 R  1000   38434   38433 99  80   0 -  2831 -      pts/0    00:00:00 ps
### Потомок превратился в зомби, судя по маркеру Z
Задание 3_1:
3.1. С помощью команды kill -l ознакомьтесь с перечнем сигналов, поддерживаемых процессами
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize31/exersize31_son1.c -o exersize31/son1
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize31/exersize31_son2.c -o exersize31/son2
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize31/exersize31_son3.c -o exersize31/son3
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ gcc exersize31/exersize31_father.c -o exersize31/father
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ cd exersize31
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize31$ ./father
son1: PID = 46976, PPID = 46975
son2: PID = 46977, PPID = 46975
son3: PID = 46978, PPID = 46975

[До отправки сигналов] Состояние процессов:
Отправка SIGUSR1 процессу son1
Отправка SIGUSR1 процессу son2
Отправка SIGUSR1 процессу son3

[После отправки сигналов] Состояние процессов:
son1: Получен сигнал 10, по умолчанию процесс завершится
son3: Получен сигнал 10, перехватываем его
^C
### Первый процесс просто завершается по умолчанию
### Второй процесс не реагирует на сигнал и работает бесконечно
### Третий процесс производит собственную обработку сигнала, сценарий для которой пользователь может создать сам
Задание 3_2:
3.2. Проанализируйте значение, возвращаемое функцией wait(&status). Как связана wait() с SIGCHLD
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize32$ gcc exersize32_wait.c -o wait
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize32$ ./wait
Дочерний процесс: PID = 49025
Процесс завершился с кодом: 40
### wait изменяет переменную status. Из этой переменной с помощью функций можно извлечь информацию о завершении процесса: код возврата, сигнал возврата и тп.
### Связь с SIGHLD. SIGHLD посылается процессу-родителю, когда дочерний процесс завершает выполнение. 
### Если процесс-родитель не вызывает wait и не обрабатывает SIGHLD, то дочерний процесс становится зомби.
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize32$ gcc exersize32_waitpid.c -o waitpid
[Пн 12 май 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize32$ ./waitpid
Ожидаем завершение дочернего процесса 1
Дочерний процесс 1: PID = 50864
Дочерний процесс 2: PID = 50865
Процесс 1 завершён с кодом: 10
Ожидаем завершение дочернего процесса 2
Процесс 2 завершён с кодом: 20
### waitpid позволяет ожидать завершение конкретного процесса по pid. 
4. Подготовьте программу, формирующую несколько нитей (потоков).
Задание 4_2:
4.2. После запуска программы проанализируйте выполнение нитей, их идентификацию, распределение во времени, 
наследуемые (от процесса) параметры (например, используя ps с ключами и/или др. способы).
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ gcc -o threads exersize41.c -pthread
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ ./threads > current_output.txt &
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ ls -l /proc/14844/exersize
итого 0
dr-xr-xr-x 7 valeria valeria 0 апр  23 21:54 16134
dr-xr-xr-x 7 valeria valeria 0 апр  23 21:54 16136
dr-xr-xr-x 7 valeria valeria 0 апр  23 21:54 16137
dr-xr-xr-x 7 valeria valeria 0 апр  23 21:54 16138
### Tid являются подкаталогами процесса
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ cat /proc/16134/exersize/16136/stat
16136 (threads) R 3862 16134 3862 34816 16229 4194368 3 0 0 0 2410 0 0 0 20 0 4 0 1626405 27926528 384 18446744073709551615 103116011483136 103116011486725 140731447969648 0 0 0 0 0 0 0 0 0 -1 14 0 0 0 0 0 103116011494704 103116011495440 103116015067136 140731447978820 140731447978830 140731447978830 140731447984110 0
### Содержит состояние, CPU, память и другие данные для потока
### Идентификация: pthread создают потоки с уникальными TID, но общим PID. Данные thread можно посмотреть обычными способами, я использовал напрямую каталог /proc
### Распределение во времени: Потоки выполняются параллельно, так как система многоядерная, в среднем потоки выполняются за одинаковое время
### Оба метода наследуют память, дескрипторы, сигналы. clone с CLONE_THREAD ведет себя аналогично pthread
### pthread более высокоуровневый и простой в использовании, тогда как clone требует ручного выделения стека, но более гибок
Задание 4_3:
4.3. Проанализируйте ресурсы, разделяемые нитями одного процесса
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ gcc -o threads3 exersize43.c -pthread
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ ./threads3 > current_output3.txt
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ cat thread_current_output.txt
pthread TID=19659, thread 3 wrote this
pthread TID=19657, thread 1 wrote this
pthread TID=19658, thread 2 wrote this
clone TID=19660, thread 1 wrote this
clone TID=19662, thread 3 wrote this
clone TID=19661, thread 2 wrote this
valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ cat current_output3.txt
Main process PID=19656
Creating pthreads...
pthread TID=19657, thread 1: incremented shared_counter to 1
pthread TID=19658, thread 2: incremented shared_counter to 2
pthread TID=19659, thread 3: incremented shared_counter to 3
pthread TID=19657, thread 1: current directory = /home/valeria/Рабочий стол/os_lb2/exersize4
pthread TID=19659, thread 3: current directory = /home/valeria/Рабочий стол/os_lb2/exersize4
pthread TID=19658, thread 2: current directory = /home/valeria/Рабочий стол/os_lb2/exersize4
All pthreads completed.

Creating clone threads...
clone TID=19660, thread 1: incremented shared_counter to 4
clone TID=19660, thread 1: current directory = /home/valeria/Рабочий стол/os_lb2/exersize4
clone T10 received by TID=19656
### Подтверждение поведения сигналов. Только одна нить обработала сигнал
clone TID=19661, thread 2: incremented shared_counter to 6
clone TID=19661, thread 2: current directory = /home/valeria/Рабочий стол/os_lb2/exersize4
All clone threads completed.
### Подтверждение разделения АП. Все нити видят и разделяют одну и ту же переменную
Contents of thread_current_output.txt:
pthread TID=19659, thread 3 wrote this
pthread TID=19657, thread 1 wrote this
pthread TID=19658, thread 2 wrote this
clone TID=19660, thread 1 wrote this
clone TID=19662, thread 3 wrote this
clone TID=19661, thread 2 wrote this
### Подтверждение разделения файловых дескрипторов. Все записи добавляются в один файл без перезаписи
### Все нити выводят одну и ту же директорию, что подтверждает разделение атрибутов фс
### PID одинаков у всех потоков, но TID разные
Задание 4_4:
Попробуйте удалить одну из нитей, зная ее идентификатор, командой kill
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ gcc -o threads4 exersize44.c -pthread
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize4$ ./threads4 > current_output4.txt
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eL | grep threads
  28239   28239 pts/0    00:00:00 threads4
  28239   28240 pts/0    00:00:00 threads4
  28239   28241 pts/0    00:00:00 threads4
  28239   28242 pts/0    00:00:00 threads4
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ kill -SIGTERM 28241
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eL | grep threads
  28239   28239 pts/0    00:00:00 threads4
  28239   28240 pts/0    00:00:01 threads4
  28239   28242 pts/0    00:00:01 threads4
### Был написан обработчик для сигнала SIGTERM, чтобы завершать отдельные нити.
### Как видно в примере и в выводе файла нить с tid=28241 была завершена вручную, остальные продолжили работу
Задание 5_1:
5.1. Определите политику планирования и приоритет, установленные по умолчанию
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ ps -eo pid,tid,psr,policy,pri,nice,comm | grep exe1
  31829   31829  12 TS   19   0 exe1
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ chrt -p 31829
pid 31829's current scheduling policy: SCHED_OTHER
pid 31829's current scheduling priority: 0
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2$ 
### По умолчанию процессы имеют параметр nice=0, приоритет 19, политику планирования TS

[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ gcc -o sched_test exersize512.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ nice -n 5 ./sched_test &
[1] 43877
### Изменяем параметр nice
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ ps -eo pid,tid,psr,policy,pri,nice,comm | grep sched_test
  43877   43877  13 TS   14   5 sched_test
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ cat current_output5.txt
[1]+  Завершён        nice -n 5 ./sched_test
PID = 43877, TID = 43877, PRI = 14
Scheduling policy: SCHED_OTHER
Nice: 5
### Выходные результаты совпадают
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ date
Сб 05 апр 2025 14:36:35 MSK
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ gcc -o planir exersize511.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ exersizeset -c 0 ./planir
Main process PID=45112, TID=45112
Policy: 0 (0=SCHED_OTHER), Priority: 19, Nice: 0
MThread TID=45113 (A) started
AThread TID=45114 (B) started
BThread TID=45115 (C) started
CABCMCBMABMACBMAACCBBAMMCBAMMCCABAMBBCCMMAABCAAMCCBBMACBMMCABBCAMCABMMMCCAABBCMABCCBMMAABCMAABCCMBBMAMCBAAMMCCBBAAMCBMACCBMMABABCCMABCBMAABMMCCABMACCBMMABCABMCCMABBMAACBMCABBAMMCCAMCBBAMMCBAAMCCBABMMCBAAMCCBAMCBBAAMMCCBAMABBCMABCCMMBAACBMMACCBMACABBMMAACCBMBBACCMMABCAABMMCABBMCCAMMBBCAACCMBAMMCBBAACMCBMABBMAACCMMBAACMBBCCAMBAACMMBBACCMBBCAAMCCMBMAACMBBACCMMBAMCBBAACCMBMABMCAABMMCAABBMCCABMCAB
Main thread completed
C
Thread TID=45115 (C) completed

Thread TID=45113 (A) completed
B
Thread TID=45114 (B) completed
All threads completed
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ exersizeset -c 0 ./planir
Main process PID=45198, TID=45198
Policy: 0 (0=SCHED_OTHER), Priority: 19, Nice: 0
MThread TID=45199 (A) started
AThread TID=45200 (B) started
BThread TID=45201 (C) started
CABCMAMCBBACMBMCAMCAMBCABMCBAMBACCMMBAACBAMBCCBMACMABMABBCCMMAABCMCABCMBBMAACCMBACMMCBAACBBAMCAMMBCCBAAMMCBAABMCCBMACBBAMMCCBAAMCBBAAMMCCBAMBCBAAMMCCBBMCABAAMMCCABBMCAMMCBAABCMBBCCAAMBCAMMBCCAMBBCAAMBCAMMBCAMCBBACCMMABCABBMACMMABACCMBBAACCMMBACMAABBMCAMBCCMMBAACCBMBAACMBABCCMBMAMCCBAAMCBABMMCBACMBBCMAACMBAMBCCABMMBCCAAMBCAABBMMCACBMAACMBBCAMMBCCAAMCBBAMMCCABBMMCAABMCABBCCMMABMCCAABBMCCMBAAMB
Thread TID=45201 (C) completed
M
Main thread completed
AB
Thread TID=45200 (B) completed

Thread TID=45199 (A) completed
All threads completed
### Процесс рапределяется по нитям почти равномерно, но хаотично, такова стандартная политика планирования
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize51$ 
Задание 5_2:
5.2. Ознакомьтесь с выполнением команды nice(1) и системного вызова getpriority(2)
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize52$ gcc exersize52.c -o priority
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize52$ exersizeset -c 0 ./priority
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize52$ cat out.txt
Дочерний процесс 1 (PID: 58097)
nice = 0
Дочерний процесс 1 завершен. Время выполнения: 54.053 секунд
Дочерний процесс 4 (PID: 58100)
nice = 10
Дочерний процесс 4 завершен. Время выполнения: 107.893 секунд
Дочерний процесс 3 (PID: 58099)
nice = 19
Дочерний процесс 3 завершен. Время выполнения: 188.604 секунд
Дочерний процесс 2 (PID: 58098)
nice = 19
Дочерний процесс 2 завершен. Время выполнения: 188.667 секунд
Дочерние процессы завершены
### Видно, что высокий приоритет позволяет процессу выполняться быстрее
Задание 5_3:
5.3. Измените процедуру планирования на FIFO
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ gcc -o execute exersize531.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ sudo exersizeset -c 0 ./execute
Процесс 2 (PID: 5396) начал выполнение с приоритетом 10
Процесс 2 завершён. Время: 0.087 секунд
Процесс 3 (PID: 5397) начал выполнение с приоритетом 10
Процесс 3 завершён. Время: 0.044 секунд
Процесс 1 (PID: 5395) начал выполнение с приоритетом 10
Процесс 1 завершён. Время: 0.045 секунд
Процесс 4 (PID: 5398) начал выполнение с приоритетом 10
Процесс 4 завершён. Время: 0.046 секунд
Все процессы завершены.
### Наблюдается типичный FIFO, первый процесс первым и обработан и первым выполнен, поскольку сложность у всех одна и та же

[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ gcc -o execute2 exersize532.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ ./execute2
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ sudo ./execute2
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ cat out2.txt
Minimal nice = 1
Maximal nice = 99
### Полученные экспериментально границы приоритетов

[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ gcc -o execute3 exersize533.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize53$ sudo exersizeset -c 0 ./execute3
Процесс 1 (PID: 13053) начал выполнение с приоритетом 10
Процесс 2 (PID: 13054) начал выполнение с приоритетом 99
Процесс 3 (PID: 13055) начал выполнение с приоритетом 1
Процесс 4 (PID: 13056) начал выполнение с приоритетом 50
Процесс 2 завершён. Время: 72.857 секунд
Процесс 4 завершён. Время: 155.454 секунд
Процесс 1 завершён. Время: 237.210 секунд
Процесс 3 завершён. Время: 309.484 секунд
Все процессы завершены.
### Приоритеты заставили процессы начать перебивать друг друга и завершиться в порядке приоритета
Задание 5_4:
Измените процедуру планирования на RR
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ gcc -o execute exersize541.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ sudo exersizeset -c 0 ./execute
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ cat out.txt
Процесс 1 (PID: 7179) начал выполнение с приоритетом 10
Процесс 1 работает
Процесс 1 работает
Процесс 1 работает
Процесс 2 (PID: 7180) начал выполнение с приоритетом 10
Процесс 2 работает
Процесс 3 (PID: 7181) начал выполнение с приоритетом 10
Процесс 3 работает
Процесс 4 (PID: 7182) начал выполнение с приоритетом 10
Процесс 4 работает
Процесс 1 работает
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 1 работает
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 1 работает
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 1 работает
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 1 завершён. Время: 9.974 секунд
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 2 работает
Процесс 3 работает
Процесс 4 работает
Процесс 2 завершён. Время: 12.075 секунд
Процесс 3 завершён. Время: 12.121 секунд
Процесс 4 завершён. Время: 12.207 секунд
Все процессы завершены.
### Вот она, циклическая работа, характерная для RR. 
### В этом типе планирования каждый процесс отрабатывает определенное время, после чего становится в конец очереди. 

[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ gcc -o execute exersize542.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ sudo ./execute
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ cat out2.txt
Minimal nice = 1
Maximal nice = 99
### границы приоритетов соответствуют таковым у FIFO.

[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize54$ cat out3.txt
Процесс 3 (PID: 10473) начал выполнение с приоритетом 30
Процесс 3 работает
Процесс 3 работает
Процесс 3 работает
Процесс 3 работает
Процесс 4 (PID: 10474) начал выполнение с приоритетом 40
Процесс 4 работает
Процесс 1 (PID: 10471) начал выполнение с приоритетом 10
Процесс 1 работает
Процесс 2 (PID: 10472) начал выполнение с приоритетом 20
Процесс 2 работает
Процесс 4 работает
Процесс 4 работает
Процесс 4 работает
Процесс 4 работает
Процесс 4 работает
Процесс 4 работает
Процесс 4 завершён. Время: 3.485 секунд
Процесс 3 работает
Процесс 3 работает
Процесс 3 работает
Процесс 3 завершён. Время: 6.788 секунд
Процесс 2 работает
Процесс 2 работает
Процесс 2 работает
Процесс 2 работает
Процесс 2 работает
Процесс 2 работает
Процесс 2 завершён. Время: 8.417 секунд
Процесс 1 работает
Процесс 1 работает
Процесс 1 работает
Процесс 1 работает
Процесс 1 работает
Процесс 1 работает
Процесс 1 завершён. Время: 11.834 секунд
Все процессы завершены
### При разных приоритетах не отличается от FIFO, поскольку RR соблюдается только при равных приоритетах
### Эксперимент показал, что для приоритета 10 один квант равен 0.08 секунд
### sched_yield() изменяет порядок в очереди процессов RR. 
Задание 5_5:
5.5. Можно ли задать разные процедуры планирования разным процессам с одинаковыми приоритетами
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize55$ gcc -o execute exersize55.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize55$ sudo ./execute
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize55$ cat out.txt
Процесс 1 (PID: 19250) начал выполнение с приоритетом 10
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 1 выполняется
Процесс 2 (PID: 19251) начал выполнение с приоритетом 10
Процесс 2 выполняется
Процесс 3 (PID: 19252) начал выполнение с приоритетом 10
Процесс 3 выполняется
Процесс 4 (PID: 19253) начал выполнение с приоритетом 10
Процесс 4 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется
Процесс 3 выполняется

Процесс 3 завершён. Время: 1.724 секунд
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется
Процесс 4 выполняется

Процесс 4 завершён. Время: 3.324 секунд
Процесс 1 выполняется
Процесс 2 выполняется
Процесс 1 выполняется
Процесс 2 выполняется

Процесс 1 завершён. Время: 5.142 секунд
Процесс 2 выполняется
Процесс 2 выполняется
Процесс 2 выполняется
Процесс 2 выполняется
Процесс 2 выполняется
Процесс 2 выполняется
Процесс 2 выполняется

Процесс 2 завершён. Время: 5.198 секунд
Все процессы завершены.

### Несколько экспериментов показали, что между RR и FIFO при одинаковых приоритетах FIFO получает преимущество, поскольку рано или поздно перехватывает инициативу, но обратно не возвращает
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ gcc -o execute exersize56.c -pthread
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ sudo exersizeset -c 0 ./execute > out.txt
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ cat out.txt
Эксперимент 1: Политика по умолчанию
Поток 1 (TID: 139135306172096): политика 0, приоритет 0
Поток 1 работает (итерация 0)
Поток 2 (TID: 139135295686336): политика 0, приоритет 0
Поток 2 работает (итерация 0)
Поток 3 (TID: 139135285200576): политика 0, приоритет 0
Поток 3 работает (итерация 0)
Поток 3 работает (итерация 100000000)
Поток 2 работает (итерация 100000000)
Поток 1 работает (итерация 100000000)
Поток 3 работает (итерация 200000000)
Поток 2 работает (итерация 200000000)
Поток 1 работает (итерация 200000000)
Поток 3 работает (итерация 300000000)
Поток 2 работает (итерация 300000000)
Поток 1 работает (итерация 300000000)
Поток 3 работает (итерация 400000000)
Поток 2 работает (итерация 400000000)
Поток 1 работает (итерация 400000000)
Поток 3 работает (итерация 500000000)
Поток 2 работает (итерация 500000000)
Поток 1 работает (итерация 500000000)
Поток 3 работает (итерация 600000000)
Поток 2 работает (итерация 600000000)
Поток 1 работает (итерация 600000000)
Поток 3 завершён
Поток 2 завершён
Поток 1 завершён
Эксперимент 1 завершён
### Планирование по умолчанию назначает приоритет 0

Эксперимент 2: Все потоки с SCHED_RR, приоритет 50
Поток 1 (TID: 139135285200576): политика 2, приоритет 50
Поток 1 работает (итерация 0)
Поток 1 работает (итерация 100000000)
Поток 1 работает (итерация 200000000)
Поток 1 работает (итерация 300000000)
Поток 1 работает (итерация 400000000)
Поток 1 работает (итерация 500000000)
Поток 1 работает (итерация 600000000)
Поток 1 завершён
Поток 2 (TID: 139135295686336): политика 2, приоритет 50
Поток 2 работает (итерация 0)
Поток 2 работает (итерация 100000000)
Поток 2 работает (итерация 200000000)
Поток 2 работает (итерация 300000000)
Поток 2 работает (итерация 400000000)
Поток 3 (TID: 139135306172096): политика 2, приоритет 50
Поток 3 работает (итерация 0)
Поток 2 работает (итерация 500000000)
Поток 3 работает (итерация 100000000)
Поток 2 работает (итерация 600000000)
Поток 3 работает (итерация 200000000)
Поток 2 завершён
Поток 3 работает (итерация 300000000)
Поток 3 работает (итерация 400000000)
Поток 3 работает (итерация 500000000)
Поток 3 работает (итерация 600000000)
Поток 3 завершён
Эксперимент 2 завершён
### При назначении всем потокам RR, они работают по обычным RR. 

Эксперимент 3: Поток 1 - SCHED_RR, остальные - SCHED_OTHER
Поток 1 (TID: 139135306172096): политика 2, приоритет 50
Поток 1 работает (итерация 0)
Поток 1 работает (итерация 100000000)
Поток 1 работает (итерация 200000000)
Поток 2 (TID: 139135295686336): политика 0, приоритет 0
Поток 2 работает (итерация 0)
Поток 3 (TID: 139135285200576): политика 0, приоритет 0
Поток 3 работает (итерация 0)
Поток 1 работает (итерация 300000000)
Поток 1 работает (итерация 400000000)
Поток 1 работает (итерация 500000000)
Поток 1 работает (итерация 600000000)
Поток 1 завершён
Поток 2 работает (итерация 100000000)
Поток 3 работает (итерация 100000000)
Поток 2 работает (итерация 200000000)
Поток 3 работает (итерация 200000000)
Поток 2 работает (итерация 300000000)
Поток 3 работает (итерация 300000000)
Поток 2 работает (итерация 400000000)
Поток 3 работает (итерация 400000000)
Поток 2 работает (итерация 500000000)
Поток 3 работает (итерация 500000000)
Поток 2 работает (итерация 600000000)
Поток 3 работает (итерация 600000000)
Поток 2 завершён
Поток 3 завершён
Эксперимент 3 завершён
### Здесь мы установили RR только потоку 1.
### Как видно, он имеет преимущества перед обычными потоками. Потому что процессы реального времени изначально приоритетнее, чем обычные
### Результат экс-та 1 совпадает с результатами п. 5_1, процессы выполняются стандартно примерно равномерно
### Результат экс-та 2 совпадает с результатами п. 5_4, процессы работают по принципу RR
### Результат ожидаем, процессы реального времени приоритетнее

Задание 5_62:
5.6. Для потоков одного процесса определите политику планирования по умолчанию
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ gcc -o execute_procs exersize562_processes.c
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ sudo exersizeset -c 0 ./execute_procs > procs.txt
[sudo] пароль для valeria: 
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ gcc -o execute_threads exersize562_threads.c -pthread
[Вт 13 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize56$ sudo exersizeset -c 0 ./execute_threads > threads.txt
### Нити отличаются от независимых потоков тем, что делят один ресурс. На планировку это не влияет.
### Это подтверждается экспериментами, распределение выполнения работает также.

Задание 6_1:
Проанализируйте наследование на этапах fork() и exec(). Проведите эксперименты с родителем и потомками
valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize61$ gcc -o execute1 exersize61.c
valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize61$ ./execute1 > out1.txt
valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize61$ cat testfile.txt
Родитель: до fork
Потомок: после fork
Родитель: после fork
valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize61$ cat out1.txt
Потомок: после exec >> testfile.txt
Родитель: текущая позиция в файле = 94
### Потомок наследует от родителя файловые дескрипторы и они вдвоем вполне успешно записывают в один файл.
### После exec файловые дескрипторы также сохранились
Задание 6_2:
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize62$ gcc -o execute exersize62.c
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize62$ ./execute > out.txt
  SCHED_RR  : Operation not permitted
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize62$ sudo ./execute > out.txt
[sudo] пароль для valeria: 
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/exersize62$ cat out.txt
После exec: PID 27244, политика 2, приоритет 50, nice 0
Родитель до fork: PID 27243,  2,  50, nice 0
Родитель после fork: PID 27243,  2,  50, nice 0
### Процесс-ребенок наследовал приоритет родителя и его политику
Задание 6_3:
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p63$ gcc -o parent parent.c
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p63$ ./parent > out.txt
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p63$ cat out.txt
После exec (PID 34592): Жду SIGUSR1
После exec: Получен SIGUSR1, но обработчик сбросился
Родитель (PID 34591): Установлен обработчик для SIGUSR1
Родитель (PID 34591): Получен SIGUSR2 от потомка, отправляю SIGUSR1
### потомок наследует диспозицию сигналов, но обработчики сбрасываются

Задание 6_4:
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p64$ gcc clone_behave.c -o execute
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p64$ sudo ./execute > out.txt
[Ср 14 мая 2025]valeria@valeria-HP-250-G3-Notebook-PC:~/Рабочий стол/os_lb2/p64$ cat out.txt
Родитель (PID 39982): политика 2, приоритет 50
Эксперимент 1: clone без разделения
Эксперимент 2: clone с CLONE_FILES | CLONE_SIGHAND
Потомок (PID 39984): политика 2, приоритет 50
PID 39984: Получен сигнал 10
### clone предоставляет больше гибкости, так как он более низкоуровневый
### Флагом CLONE_FILES можно сделать, чтобы файлы разделялись
### Приоритеты и политика наследуются всегда
### Флагом CLONE_SIGHAND можно сделать, чтобы сигналы разделялись